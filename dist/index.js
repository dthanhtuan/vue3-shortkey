!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("VueShortkey",[],t):"object"==typeof exports?exports.VueShortkey=t():e.VueShortkey=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="../dist/",t(t.s=0)}([function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e={},t=[],n={shift:"shift",ctrl:"ctrl",meta:"meta",alt:"alt"},o=Object.keys(n);return{parseValue:function(e){var t="string"==typeof e?JSON.parse(e.replace(/'/gi,'"')):e;return t instanceof Array?{"":t}:t},createShortcutIndex:function(e){var t="";return("Shift"===e.key||e.shiftKey)&&(t+="shift"),("Control"===e.key||e.ctrlKey)&&(t+="ctrl"),("Meta"===e.key||e.metaKey)&&(t+="meta"),"Enter"===e.key&&(t+="enter")," "===e.key&&(t+="space"),(e.key&&" "!==e.key&&1===e.key.length||/F\d{1,2}|\//g.test(e.key))&&(t+=e.key.toLowerCase()),t},focusedElementFunction:function(t){return e[t.id]},dispatchShortkeyEvent:function(e){var t=new CustomEvent("shortkey",{bubbles:!1});e.key&&(t.srcKey=e.key),e.el.dispatchEvent(t)},decodeKey:function(e){return this.createShortcutIndex(e)},encodeKey:function(e){var t={};t.shiftKey=e.includes(n.shift),t.ctrlKey=e.includes(n.ctrl),t.metaKey=e.includes(n.meta),t.altKey=e.includes(n.alt);var r=this.createShortcutIndex(t);return r+=e.filter(function(e){return!o.includes(e)}).join("")},mappingFunctions:function(t){var n=this,r=t.value,o=t.el,i=this.focusedElementFunction(o.id)||{};Object.keys(r).forEach(function(t){if(Object.prototype.hasOwnProperty.call(r,t)){var u=n.encodeKey(r[t]);i[u]={el:o,key:t},e[o.id]=i}})},availableElement:function(e){var n=!!t.find(function(e){return document.activeElement&&document.activeElement.matches(e)});return!!e&&!n},bindValue:function(e,t){this.mappingFunctions({value:e,el:t.el})},unbindValue:function(e,t){var n=this,r=this.focusedElementFunction(t);Object.keys(e).forEach(function(t){if(Object.prototype.hasOwnProperty.call(e,t)){var o=n.encodeKey(e[t]);delete r[o]}})},shortKeyInit:function(e,n){t=[].concat(r(n&&n.prevent?n.prevent:[]));var o=this;e.directive("shortkey",{beforeMount:function(e,t,n){var r=o.parseValue(t.value);o.bindValue(r,n),o.addEventListeners(e,o)},unmounted:function(e,t,n){var r=o.parseValue(t.value);o.unbindValue(r,n.el)}})},addEventListeners:function(e,t){e.addEventListener("keydown",function(n){var r=t.focusedElementFunction(e),o=t.decodeKey(n),i=r[o];t.availableElement(i)&&(n.preventDefault(),n.stopPropagation())},!0),e.addEventListener("keyup",function(n){var r=t.focusedElementFunction(e),o=t.decodeKey(n),i=r[o];t.availableElement(i)&&(n.preventDefault(),n.stopPropagation(),t.dispatchShortkeyEvent(i))},!0)}}};t.default={install:function(e,t){o().shortKeyInit(e,t)}}}])});
//# sourceMappingURL=index.js.map